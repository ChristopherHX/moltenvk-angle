// Generated by HLC 4.1.2 (HL v4)
#define HLC_BOOT
#include <hlc.h>
#include <actions/FiniteTimeActionState.h>
double Math_max(double,double);
double Math_min(double,double);
#include <actions/FiniteTimeAction.h>
extern hl_type t$hl_types_ArrayObj;
void hl_types_ArrayObj_new(hl__types__ArrayObj);
int hl_types_ArrayObj_push(hl__types__ArrayObj,vdynamic*);
double actions_FiniteTimeAction_get_Duration(actions__FiniteTimeAction);

double actions_FiniteTimeActionState_get_Elapsed(actions__FiniteTimeActionState r0) {
	double r1;
	r1 = r0->elapsed;
	return r1;
}

bool actions_FiniteTimeActionState_IsDone(actions__FiniteTimeActionState r0) {
	bool r3;
	urho3d__Node r4, r5;
	double r1, r2;
	r1 = r0->elapsed;
	r2 = r0->Duration;
	if( r1 >= r2 ) goto label$2ea4248_2_10;
	r4 = r0->Target;
	r5 = NULL;
	if( r4 == r5 ) goto label$2ea4248_2_8;
	r3 = false;
	goto label$2ea4248_2_9;
	label$2ea4248_2_8:
	r3 = true;
	label$2ea4248_2_9:
	return r3;
	label$2ea4248_2_10:
	r3 = true;
	return r3;
}

void actions_FiniteTimeActionState_Update(actions__FiniteTimeActionState r0,double r1) {
	return;
}

void actions_FiniteTimeActionState_Step(actions__FiniteTimeActionState r0,double r1) {
	bool r3;
	double r4, r5, r6, r7, r8;
	r3 = r0->firstTick;
	if( !r3 ) goto label$2ea4248_4_7;
	r3 = false;
	r0->firstTick = r3;
	r4 = 0.;
	r0->elapsed = r4;
	goto label$2ea4248_4_10;
	label$2ea4248_4_7:
	r4 = r0->elapsed;
	r4 = r4 + r1;
	r0->elapsed = r4;
	label$2ea4248_4_10:
	r4 = 0.;
	r5 = 1.;
	r6 = r0->elapsed;
	r7 = r0->Duration;
	r8 = 9.999999999999999547e-08;
	r7 = Math_max(r7,r8);
	r6 = r6 / r7;
	r5 = Math_min(r5,r6);
	r4 = Math_max(r4,r5);
	((void (*)(actions__FiniteTimeActionState,double))r0->$type->vobj_proto[1])(r0,r4);
	return;
}

void actions_FiniteTimeActionState_Stop(actions__FiniteTimeActionState r0) {
	urho3d__Node r1;
	r1 = NULL;
	r0->Target = r1;
	return;
}

void actions_FiniteTimeActionState_new(actions__FiniteTimeActionState r0,actions__FiniteTimeAction r1,urho3d__Node r2) {
	hl__types__ArrayObj r3;
	bool r7;
	urho3d__Node r5;
	double r6;
	int r8;
	r3 = (hl__types__ArrayObj)hl_alloc_obj(&t$hl_types_ArrayObj);
	hl_types_ArrayObj_new(r3);
	r0->Action = r3;
	r5 = NULL;
	r0->OriginalTarget = r5;
	r5 = NULL;
	r0->Target = r5;
	r6 = 0.;
	r0->elapsed = r6;
	r6 = 0.;
	r0->Duration = r6;
	r7 = false;
	r0->firstTick = r7;
	r3 = r0->Action;
	if( r3 == NULL ) hl_null_access();
	r8 = hl_types_ArrayObj_push(r3,((vdynamic*)r1));
	r0->Target = r2;
	r0->OriginalTarget = r2;
	if( r1 == NULL ) hl_null_access();
	r6 = actions_FiniteTimeAction_get_Duration(r1);
	r0->Duration = r6;
	r6 = 0.;
	r0->elapsed = r6;
	r7 = true;
	r0->firstTick = r7;
	return;
}

