// Generated by HLC 4.1.2 (HL v4)
#define HLC_BOOT
#include <hlc.h>
#include <actions/SequenceState.h>
#include <actions/FiniteTimeAction.h>
void actions_FiniteTimeActionState_Step(actions__FiniteTimeActionState,double);
void hl_types_ArrayObj___expand(hl__types__ArrayObj,int);
#include <actions/Sequence.h>
extern hl_type t$actions_FiniteTimeActionState;
#include <hl/natives.h>
hl__types__ArrayObj hl_types_ArrayObj_alloc(varray*);
extern hl_type t$actions_FiniteTimeAction;
void actions_FiniteTimeActionState_new(actions__FiniteTimeActionState,actions__FiniteTimeAction,urho3d__Node);
double actions_FiniteTimeAction_get_Duration(actions__FiniteTimeAction);

bool actions_SequenceState_IsDone(actions__SequenceState r0) {
	hl__types__ArrayObj r2;
	bool r1, r8;
	actions__FiniteTimeAction r5;
	double r9, r10;
	vdynamic *r6;
	varray *r7;
	int r3, r4;
	r1 = r0->hasInfiniteAction;
	if( !r1 ) goto label$bc45b95_1_18;
	r2 = r0->actionSequences;
	if( r2 == NULL ) hl_null_access();
	r3 = r0->last;
	r4 = r2->length;
	if( ((unsigned)r3) < ((unsigned)r4) ) goto label$bc45b95_1_9;
	r5 = NULL;
	goto label$bc45b95_1_12;
	label$bc45b95_1_9:
	r7 = r2->array;
	r6 = ((vdynamic**)(r7 + 1))[r3];
	r5 = (actions__FiniteTimeAction)r6;
	label$bc45b95_1_12:
	if( r5 == NULL ) hl_null_access();
	r1 = r5->isRepeatForever;
	r8 = true;
	if( r1 != r8 ) goto label$bc45b95_1_18;
	r1 = false;
	return r1;
	label$bc45b95_1_18:
	r9 = r0->elapsed;
	r10 = r0->Duration;
	if( r9 >= r10 ) goto label$bc45b95_1_23;
	r1 = false;
	goto label$bc45b95_1_24;
	label$bc45b95_1_23:
	r1 = true;
	label$bc45b95_1_24:
	return r1;
}

void actions_SequenceState_Stop(actions__SequenceState r0) {
	hl__types__ArrayObj r4;
	actions__FiniteTimeActionState r5;
	vdynamic *r6;
	varray *r7;
	int r2, r3;
	r2 = r0->last;
	r3 = -1;
	if( r2 == r3 ) goto label$bc45b95_2_15;
	r4 = r0->actionStates;
	if( r4 == NULL ) hl_null_access();
	r2 = r0->last;
	r3 = r4->length;
	if( ((unsigned)r2) < ((unsigned)r3) ) goto label$bc45b95_2_10;
	r5 = NULL;
	goto label$bc45b95_2_13;
	label$bc45b95_2_10:
	r7 = r4->array;
	r6 = ((vdynamic**)(r7 + 1))[r2];
	r5 = (actions__FiniteTimeActionState)r6;
	label$bc45b95_2_13:
	if( r5 == NULL ) hl_null_access();
	((void (*)(actions__FiniteTimeActionState))r5->$type->vobj_proto[3])(r5);
	label$bc45b95_2_15:
	return;
}

void actions_SequenceState_Step(actions__SequenceState r0,double r1) {
	hl__types__ArrayObj r6;
	actions__FiniteTimeActionState r11;
	bool r5, r10;
	actions__FiniteTimeAction r7;
	vdynamic *r8;
	varray *r9;
	int r3, r4;
	r3 = r0->last;
	r4 = -1;
	if( r4 >= r3 ) goto label$bc45b95_3_30;
	r6 = r0->actionSequences;
	if( r6 == NULL ) hl_null_access();
	r3 = r0->last;
	r4 = r6->length;
	if( ((unsigned)r3) < ((unsigned)r4) ) goto label$bc45b95_3_10;
	r7 = NULL;
	goto label$bc45b95_3_13;
	label$bc45b95_3_10:
	r9 = r6->array;
	r8 = ((vdynamic**)(r9 + 1))[r3];
	r7 = (actions__FiniteTimeAction)r8;
	label$bc45b95_3_13:
	if( r7 == NULL ) hl_null_access();
	r5 = r7->isRepeatForever;
	r10 = true;
	if( r5 != r10 ) goto label$bc45b95_3_30;
	r6 = r0->actionStates;
	if( r6 == NULL ) hl_null_access();
	r3 = r0->last;
	r4 = r6->length;
	if( ((unsigned)r3) < ((unsigned)r4) ) goto label$bc45b95_3_24;
	r11 = NULL;
	goto label$bc45b95_3_27;
	label$bc45b95_3_24:
	r9 = r6->array;
	r8 = ((vdynamic**)(r9 + 1))[r3];
	r11 = (actions__FiniteTimeActionState)r8;
	label$bc45b95_3_27:
	if( r11 == NULL ) hl_null_access();
	((void (*)(actions__FiniteTimeActionState,double))r11->$type->vobj_proto[2])(r11,r1);
	goto label$bc45b95_3_31;
	label$bc45b95_3_30:
	actions_FiniteTimeActionState_Step(((actions__FiniteTimeActionState)r0),r1);
	label$bc45b95_3_31:
	return;
}

void actions_SequenceState_Update(actions__SequenceState r0,double r1) {
	hl__types__ArrayObj r10, r12;
	bool r18;
	actions__FiniteTimeActionState r11;
	urho3d__Node r17;
	actions__FiniteTimeAction r14;
	double r3, r4, r7, r8;
	vdynamic *r15;
	varray *r16;
	int r5, r6, r9, r13;
	r4 = r0->split;
	if( !(r1 < r4) ) goto label$bc45b95_4_14;
	r6 = 0;
	r5 = r6;
	r3 = r0->split;
	r4 = 0.;
	if( r3 == r4 ) goto label$bc45b95_4_11;
	r7 = r0->split;
	r4 = r1 / r7;
	r3 = r4;
	goto label$bc45b95_4_13;
	label$bc45b95_4_11:
	r4 = 1.;
	r3 = r4;
	label$bc45b95_4_13:
	goto label$bc45b95_4_29;
	label$bc45b95_4_14:
	r6 = 1;
	r5 = r6;
	r4 = r0->split;
	r7 = 1.;
	if( r4 != r7 ) goto label$bc45b95_4_22;
	r4 = 1.;
	r3 = r4;
	goto label$bc45b95_4_29;
	label$bc45b95_4_22:
	r7 = r0->split;
	r4 = r1 - r7;
	r7 = 1.;
	r8 = r0->split;
	r7 = r7 - r8;
	r4 = r4 / r7;
	r3 = r4;
	label$bc45b95_4_29:
	r9 = 1;
	if( r6 != r9 ) goto label$bc45b95_4_110;
	r6 = r0->last;
	r9 = -1;
	if( r6 != r9 ) goto label$bc45b95_4_81;
	r10 = r0->actionStates;
	if( r10 == NULL ) hl_null_access();
	r6 = 0;
	r12 = r0->actionSequences;
	if( r12 == NULL ) hl_null_access();
	r9 = 0;
	r13 = r12->length;
	if( ((unsigned)r9) < ((unsigned)r13) ) goto label$bc45b95_4_44;
	r14 = NULL;
	goto label$bc45b95_4_47;
	label$bc45b95_4_44:
	r16 = r12->array;
	r15 = ((vdynamic**)(r16 + 1))[r9];
	r14 = (actions__FiniteTimeAction)r15;
	label$bc45b95_4_47:
	if( r14 == NULL ) hl_null_access();
	r17 = r0->Target;
	r11 = ((actions__FiniteTimeActionState (*)(actions__FiniteTimeAction,urho3d__Node))r14->$type->vobj_proto[1])(r14,r17);
	r9 = r10->length;
	if( ((unsigned)r6) < ((unsigned)r9) ) goto label$bc45b95_4_53;
	hl_types_ArrayObj___expand(r10,r6);
	label$bc45b95_4_53:
	r16 = r10->array;
	((actions__FiniteTimeActionState*)(r16 + 1))[r6] = r11;
	r10 = r0->actionStates;
	if( r10 == NULL ) hl_null_access();
	r6 = 0;
	r9 = r10->length;
	if( ((unsigned)r6) < ((unsigned)r9) ) goto label$bc45b95_4_62;
	r11 = NULL;
	goto label$bc45b95_4_65;
	label$bc45b95_4_62:
	r16 = r10->array;
	r15 = ((vdynamic**)(r16 + 1))[r6];
	r11 = (actions__FiniteTimeActionState)r15;
	label$bc45b95_4_65:
	if( r11 == NULL ) hl_null_access();
	r4 = 1.;
	((void (*)(actions__FiniteTimeActionState,double))r11->$type->vobj_proto[1])(r11,r4);
	r10 = r0->actionStates;
	if( r10 == NULL ) hl_null_access();
	r6 = 0;
	r9 = r10->length;
	if( ((unsigned)r6) < ((unsigned)r9) ) goto label$bc45b95_4_75;
	r11 = NULL;
	goto label$bc45b95_4_78;
	label$bc45b95_4_75:
	r16 = r10->array;
	r15 = ((vdynamic**)(r16 + 1))[r6];
	r11 = (actions__FiniteTimeActionState)r15;
	label$bc45b95_4_78:
	if( r11 == NULL ) hl_null_access();
	((void (*)(actions__FiniteTimeActionState))r11->$type->vobj_proto[3])(r11);
	goto label$bc45b95_4_109;
	label$bc45b95_4_81:
	r6 = r0->last;
	r9 = 0;
	if( r6 != r9 ) goto label$bc45b95_4_109;
	r10 = r0->actionStates;
	if( r10 == NULL ) hl_null_access();
	r6 = 0;
	r9 = r10->length;
	if( ((unsigned)r6) < ((unsigned)r9) ) goto label$bc45b95_4_91;
	r11 = NULL;
	goto label$bc45b95_4_94;
	label$bc45b95_4_91:
	r16 = r10->array;
	r15 = ((vdynamic**)(r16 + 1))[r6];
	r11 = (actions__FiniteTimeActionState)r15;
	label$bc45b95_4_94:
	if( r11 == NULL ) hl_null_access();
	r4 = 1.;
	((void (*)(actions__FiniteTimeActionState,double))r11->$type->vobj_proto[1])(r11,r4);
	r10 = r0->actionStates;
	if( r10 == NULL ) hl_null_access();
	r6 = 0;
	r9 = r10->length;
	if( ((unsigned)r6) < ((unsigned)r9) ) goto label$bc45b95_4_104;
	r11 = NULL;
	goto label$bc45b95_4_107;
	label$bc45b95_4_104:
	r16 = r10->array;
	r15 = ((vdynamic**)(r16 + 1))[r6];
	r11 = (actions__FiniteTimeActionState)r15;
	label$bc45b95_4_107:
	if( r11 == NULL ) hl_null_access();
	((void (*)(actions__FiniteTimeActionState))r11->$type->vobj_proto[3])(r11);
	label$bc45b95_4_109:
	goto label$bc45b95_4_140;
	label$bc45b95_4_110:
	r9 = 0;
	if( r6 != r9 ) goto label$bc45b95_4_140;
	r6 = r0->last;
	r9 = 1;
	if( r6 != r9 ) goto label$bc45b95_4_140;
	r10 = r0->actionStates;
	if( r10 == NULL ) hl_null_access();
	r6 = 1;
	r9 = r10->length;
	if( ((unsigned)r6) < ((unsigned)r9) ) goto label$bc45b95_4_122;
	r11 = NULL;
	goto label$bc45b95_4_125;
	label$bc45b95_4_122:
	r16 = r10->array;
	r15 = ((vdynamic**)(r16 + 1))[r6];
	r11 = (actions__FiniteTimeActionState)r15;
	label$bc45b95_4_125:
	if( r11 == NULL ) hl_null_access();
	r4 = 0.;
	((void (*)(actions__FiniteTimeActionState,double))r11->$type->vobj_proto[1])(r11,r4);
	r10 = r0->actionStates;
	if( r10 == NULL ) hl_null_access();
	r6 = 1;
	r9 = r10->length;
	if( ((unsigned)r6) < ((unsigned)r9) ) goto label$bc45b95_4_135;
	r11 = NULL;
	goto label$bc45b95_4_138;
	label$bc45b95_4_135:
	r16 = r10->array;
	r15 = ((vdynamic**)(r16 + 1))[r6];
	r11 = (actions__FiniteTimeActionState)r15;
	label$bc45b95_4_138:
	if( r11 == NULL ) hl_null_access();
	((void (*)(actions__FiniteTimeActionState))r11->$type->vobj_proto[3])(r11);
	label$bc45b95_4_140:
	r9 = r0->last;
	if( r5 != r9 ) goto label$bc45b95_4_155;
	r10 = r0->actionStates;
	if( r10 == NULL ) hl_null_access();
	r9 = r10->length;
	if( ((unsigned)r5) < ((unsigned)r9) ) goto label$bc45b95_4_148;
	r11 = NULL;
	goto label$bc45b95_4_151;
	label$bc45b95_4_148:
	r16 = r10->array;
	r15 = ((vdynamic**)(r16 + 1))[r5];
	r11 = (actions__FiniteTimeActionState)r15;
	label$bc45b95_4_151:
	if( r11 == NULL ) hl_null_access();
	r18 = ((bool (*)(actions__FiniteTimeActionState))r11->$type->vobj_proto[0])(r11);
	if( !r18 ) goto label$bc45b95_4_155;
	return;
	label$bc45b95_4_155:
	r9 = r0->last;
	if( r5 == r9 ) goto label$bc45b95_4_176;
	r10 = r0->actionStates;
	if( r10 == NULL ) hl_null_access();
	r12 = r0->actionSequences;
	if( r12 == NULL ) hl_null_access();
	r13 = r12->length;
	if( ((unsigned)r5) < ((unsigned)r13) ) goto label$bc45b95_4_165;
	r14 = NULL;
	goto label$bc45b95_4_168;
	label$bc45b95_4_165:
	r16 = r12->array;
	r15 = ((vdynamic**)(r16 + 1))[r5];
	r14 = (actions__FiniteTimeAction)r15;
	label$bc45b95_4_168:
	if( r14 == NULL ) hl_null_access();
	r17 = r0->Target;
	r11 = ((actions__FiniteTimeActionState (*)(actions__FiniteTimeAction,urho3d__Node))r14->$type->vobj_proto[1])(r14,r17);
	r9 = r10->length;
	if( ((unsigned)r5) < ((unsigned)r9) ) goto label$bc45b95_4_174;
	hl_types_ArrayObj___expand(r10,r5);
	label$bc45b95_4_174:
	r16 = r10->array;
	((actions__FiniteTimeActionState*)(r16 + 1))[r5] = r11;
	label$bc45b95_4_176:
	r10 = r0->actionStates;
	if( r10 == NULL ) hl_null_access();
	r9 = r10->length;
	if( ((unsigned)r5) < ((unsigned)r9) ) goto label$bc45b95_4_182;
	r11 = NULL;
	goto label$bc45b95_4_185;
	label$bc45b95_4_182:
	r16 = r10->array;
	r15 = ((vdynamic**)(r16 + 1))[r5];
	r11 = (actions__FiniteTimeActionState)r15;
	label$bc45b95_4_185:
	if( r11 == NULL ) hl_null_access();
	((void (*)(actions__FiniteTimeActionState,double))r11->$type->vobj_proto[1])(r11,r3);
	r0->last = r5;
	return;
}

void actions_SequenceState_new(actions__SequenceState r0,actions__Sequence r1,urho3d__Node r2) {
	hl__types__ArrayObj r4;
	hl_type *r6;
	bool r3, r12;
	actions__FiniteTimeAction r10;
	double r13, r14;
	vdynamic *r11;
	int r7, r9;
	varray *r5;
	r3 = false;
	r0->hasInfiniteAction = r3;
	r6 = &t$actions_FiniteTimeActionState;
	r7 = 0;
	r5 = hl_alloc_array(r6,r7);
	r4 = hl_types_ArrayObj_alloc(r5);
	r0->actionStates = r4;
	r6 = &t$actions_FiniteTimeAction;
	r7 = 0;
	r5 = hl_alloc_array(r6,r7);
	r4 = hl_types_ArrayObj_alloc(r5);
	r0->actionSequences = r4;
	r7 = -1;
	r0->last = r7;
	actions_FiniteTimeActionState_new(((actions__FiniteTimeActionState)r0),((actions__FiniteTimeAction)r1),r2);
	if( r1 == NULL ) hl_null_access();
	r4 = r1->Actions;
	r0->actionSequences = r4;
	r4 = r0->actionSequences;
	if( r4 == NULL ) hl_null_access();
	r7 = 0;
	r9 = r4->length;
	if( ((unsigned)r7) < ((unsigned)r9) ) goto label$bc45b95_5_25;
	r10 = NULL;
	goto label$bc45b95_5_28;
	label$bc45b95_5_25:
	r5 = r4->array;
	r11 = ((vdynamic**)(r5 + 1))[r7];
	r10 = (actions__FiniteTimeAction)r11;
	label$bc45b95_5_28:
	if( r10 == NULL ) hl_null_access();
	r3 = r10->isRepeatForever;
	r12 = true;
	if( r3 == r12 ) goto label$bc45b95_5_48;
	r4 = r0->actionSequences;
	if( r4 == NULL ) hl_null_access();
	r7 = 1;
	r9 = r4->length;
	if( ((unsigned)r7) < ((unsigned)r9) ) goto label$bc45b95_5_39;
	r10 = NULL;
	goto label$bc45b95_5_42;
	label$bc45b95_5_39:
	r5 = r4->array;
	r11 = ((vdynamic**)(r5 + 1))[r7];
	r10 = (actions__FiniteTimeAction)r11;
	label$bc45b95_5_42:
	if( r10 == NULL ) hl_null_access();
	r3 = r10->isRepeatForever;
	r12 = true;
	if( r3 == r12 ) goto label$bc45b95_5_48;
	r3 = false;
	goto label$bc45b95_5_49;
	label$bc45b95_5_48:
	r3 = true;
	label$bc45b95_5_49:
	r0->hasInfiniteAction = r3;
	r4 = r0->actionSequences;
	if( r4 == NULL ) hl_null_access();
	r7 = 0;
	r9 = r4->length;
	if( ((unsigned)r7) < ((unsigned)r9) ) goto label$bc45b95_5_57;
	r10 = NULL;
	goto label$bc45b95_5_60;
	label$bc45b95_5_57:
	r5 = r4->array;
	r11 = ((vdynamic**)(r5 + 1))[r7];
	r10 = (actions__FiniteTimeAction)r11;
	label$bc45b95_5_60:
	if( r10 == NULL ) hl_null_access();
	r13 = actions_FiniteTimeAction_get_Duration(r10);
	r14 = r0->Duration;
	r13 = r13 / r14;
	r0->split = r13;
	r7 = -1;
	r0->last = r7;
	return;
}

